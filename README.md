## Interactive Christmas Tree (AI & WebGL)

一个基于 Three.js 和 MediaPipe 的「AI 手势圣诞树」小实验。  
用户可以通过摄像头手势来旋转圣诞树、切换模式，并在树上挂上自己的照片。

当前主要特性：
- 纯前端，单文件 `index.html` 完成全部逻辑
- Three.js 粒子化圣诞树（球、钻石、星星、礼物盒等几何体）
- UnrealBloom 后期 + 星野背景 + 雪花系统
- MediaPipe HandLandmarker 手势识别（旋转 / 散落 / 聚焦）
- 鼠标浏览已关闭，主交互为手势
- 摄像头画面在 UI 中隐藏，只在后台用于识别

---

## 本地运行

项目根目录已经在 IDE 中默认使用：

```bash
python -m http.server 8000
```

你也可以在本机手动启动：

```bash
cd 2025tree3d
python -m http.server 8000
```

然后在浏览器打开：

```text
http://localhost:8000/
```

> 提示：  
> - 为了让摄像头权限正常工作，推荐使用 Chrome / Edge / Safari 等现代浏览器。  
> - 在非本地环境部署时，建议使用 HTTPS 域名，否则部分浏览器会拦截摄像头访问。

---

## 使用说明

- PC 端 / 移动端均可使用摄像头手势控制
- 页面右下角有一行状态文字：
  - 初始为：`Tap here to enable gesture control`
  - 点击（或在手机上轻触）后，会请求摄像头权限并启动手势识别
  - 成功后状态会更新为 AI 就绪提示
- 摄像头画面不会直接显示在 UI 上，但会在隐藏的 `<video>` 元素里持续运行，用于手势检测
- 树下方有两个按钮：
  - `Add Memories`：上传一张图片，会作为礼物照片挂到树上
  - `Restore Tree`：恢复树的原始形状

---

## 手势交互逻辑（概览）

大致映射关系（以 `processGestures` 中逻辑为准）：

- 水平移动手掌（左 / 右）  
  - 控制圣诞树绕 Y 轴旋转（类似虚拟摇杆）
- 垂直移动手掌（上 / 下）  
  - 控制圣诞树轻微前后倾斜
- 手势形状切换模式：
  - 捏合（Pinch：拇指和食指接近）→ `FOCUS` 模式，聚焦某张照片
  - 握拳（手指弯曲、延伸较少）→ `TREE` 模式，恢复正常树形
  - 大张开手掌（手指完全伸展）→ `SCATTER` 模式，装饰物散落漂浮

---

## 隐私与体验

- 摄像头视频在 CSS 中被设置为极小尺寸且完全透明，仅在后台供 AI 使用
- 如果摄像头被其他应用占用或权限被拒绝：
  - 右下角状态文字会提示具体原因（如设备被占用 / 权限被阻止）
  - 圣诞树会自动以极慢速度自转，保证画面不至于完全静止

---

## 初始提示词（给 AI 助手用）

以下是一个可以直接粘贴给大模型（如 ChatGPT / Claude 等）的初始提示词，用于继续改造本项目：

```text
你正在协助改进一个基于 Three.js 和 MediaPipe 的「AI 手势圣诞树」网页项目。
代码全部在项目根目录的 index.html 中（单页面应用）。

当前设计目标：
1. 整体风格：黑色背景 + 星野 + 金色点缀，偏电影感，而不是过曝的 HDR。
2. 主体：由大量小几何体（球、钻石、星星、礼物盒）构成的粒子圣诞树，底部有金色丝带环绕。
3. 交互：
   - 鼠标浏览已关闭，主要靠摄像头手势与树互动。
   - 手势用于控制旋转、倾斜以及在 TREE / SCATTER / FOCUS 三种模式间切换。
4. 摄像头隐私体验：
   - 页面上不直接展示摄像头画面，只在隐藏 video 元素中作为 AI 输入。
   - 右下角状态文字是开启/错误提示入口（Tap here to enable gesture control）。
   - 常见错误（设备占用、权限阻止）要用友好文案提示用户。
5. 视觉细节：
   - 已经减少了呼吸式缩放动画，粒子不再统一“呼吸”。
   - 金色/金属材质已经做了柔化，避免近景时一片灰白高光。
   - 按钮使用玻璃拟态 + 幽灵按钮风格，字体用 Cinzel（标题）+ Montserrat（按钮/状态文案）。

在做任何修改时，请遵守以下原则：
- 不新增构建工具，保持纯静态 HTML + ES module 的形式。
- 遵循现有代码风格，不随意引入新的第三方库（Three.js 和 MediaPipe 已经足够）。
- 保持手势交互为主要卖点：不要恢复鼠标 OrbitControls 浏览。
- 优先从 index.html 现有结构中进行小步迭代，而不是重写全部架构。

如果需要改进：
- 可以从三个方向思考：视觉（材质、光影、构图）、交互（手势映射、移动端体验）、性能（粒子数量、材质复用）。
- 所有说明和注释请用简洁的英文或中文，方便设计师和前端工程师一起协作。
```

你可以根据后续需求，继续在这个 README 中补充部署方式、更多手势说明或设计规范。  
目前内容主要用于快速理解项目和为 AI 助手提供一个良好的起始语境。

