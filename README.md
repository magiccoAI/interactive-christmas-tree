## Interactive Christmas Tree (AI & WebGL)

一个基于 Three.js 和 MediaPipe 的「AI 手势圣诞树」网页体验。  
用户可以通过**摄像头手势**或**触摸交互**来旋转圣诞树、切换模式，并在树上挂上自己的照片。  
搭配圣诞八音盒背景音乐，营造沉浸式节日氛围。

### ✨ 核心特性

*   **Three.js 3D 视觉**: 粒子化圣诞树（球、钻石、星星、礼物盒），搭配 UnrealBloom 辉光、星空背景与飘雪效果。
*   **AI 手势识别**: 集成 MediaPipe HandLandmarker，通过手势控制旋转、散落与聚焦。
    *   **全模式通用交互**: 在树形、散落、聚焦模式下均支持左右挥手旋转背景。
    *   **智能手势防误触**: 优化了握拳、张手与旋转手势的冲突，体验更流畅。
*   **沉浸式音效**: 合成的圣诞八音盒旋律 (Jingle Bells) + 节奏铃铛，支持静音切换。
*   **回忆相册 (Add Memories)**: 
    *   支持多图上传，生成拍立得 (Polaroid) 风格照片挂件。
    *   **聚焦模式 (Focus Mode)**: 智能锁定照片正对视角，支持手势左右切换浏览。
*   **全平台交互**:
    *   **PC**: 摄像头手势 + 鼠标拖拽。
    *   **Mobile**: 触摸滑动旋转 + 底部模式切换按钮 + 响应式 UI。
*   **国际化 (I18N)**: 支持 中文 / English 实时切换。
*   **隐私保护**: 摄像头画面仅在本地处理，不做任何上传；照片数据纯本地渲染。

本项目最初参考提示词来自：https://zhuanlan.zhihu.com/p/1981732280851506856

---

### 🚀 快速开始

项目为纯前端单文件应用 (`index.html`)，但由于浏览器安全策略（加载本地模型和开启摄像头），建议通过本地服务器运行。

#### 1. 启动本地服务器

```bash
# 在项目根目录下
python -m http.server 8000
```

#### 2. 访问

打开浏览器访问：`http://localhost:8000/`

> **注意**: 
> *   摄像头功能需要 **HTTPS** 或 **localhost** 环境。
> *   在局域网其他设备访问时（如手机访问电脑 IP），请确保配置了 HTTPS，否则摄像头可能无法启动（会显示警告提示）。

---

### 🎮 交互指南

#### 界面控制
*   **语言切换**: 点击右上角 `EN / 中文` 按钮。
*   **声音开关**: 点击 `🔇` / `🔊` 按钮开启或关闭背景音乐。
*   **模式切换**: 
    *   🎄 **Tree**: 经典圣诞树形态。
    *   ✨ **Scatter**: 粒子散落漫游。
    *   🔍 **Focus**: 聚焦查看挂在树上的照片。
*   **添加回忆**: 点击 `Add Memories` 上传照片，照片会以拍立得风格挂在树上。

#### 手势控制 (AI)
点击页面底部的提示文字 `点击此处开启手势控制` (Tap here to enable gesture control) 激活 AI。

| 手势 | 动作 | 说明 |
| :--- | :--- | :--- |
| **左右挥手** | 旋转 / 切换 | **全模式通用**：左右移动手掌旋转场景。<br>**聚焦模式下**：大幅度持续移动可切换上一张/下一张照片。 |
| **上下移动** | 倾斜 | 控制视角俯仰 |
| **握拳 ✊** | 还原 | 切换回圣诞树模式 (Tree Mode)，可用作“刹车”。 |
| **张开手掌 🖐** | 散落 | 切换到散落模式 (Scatter Mode)。*(旋转时自动忽略，防止误触)* |
| **捏合 👌** | 聚焦 | 切换到聚焦模式 (Focus Mode)，查看照片细节。 |

#### 触控/鼠标控制 (Fallback)
如果不使用摄像头，也可以直接操作：
*   **拖拽/滑动**: 在屏幕任意位置按住拖动，旋转圣诞树。
*   **底部按钮**: 点击屏幕下方的图标直接切换模式。

---

### 🛠️ 技术栈

*   **渲染**: Three.js (WebGL)
*   **AI**: MediaPipe Tasks Vision (HandLandmarker)
*   **音频**: Web Audio API (实时合成音效，无外部音频文件)
*   **UI**: 原生 HTML/CSS (Glassmorphism 风格)

---

### 📱 移动端兼容性

*   已适配 iOS/Android 移动端浏览器。
*   针对移动端增加了 `touchstart` / `touchmove` 事件支持。
*   增加了 HTTPS 安全上下文检测，若在非安全环境下打开，会弹出提示。
